<?xml version="1.0" encoding="utf-8"?>
<Project>
    <!-- Ensure proper native framework references for iOS apps consuming this package -->
    <ItemGroup Condition="$(TargetFramework.Contains('-ios'))">
        <!-- Include the xcframework as a NativeReference from buildTransitive folder -->
        <NativeReference
            Include="$(MSBuildThisFileDirectory)../buildTransitive/xcframeworks/flic2lib.xcframework">
            <Kind>Framework</Kind>
            <ForceLoad>true</ForceLoad>
            <Frameworks>Foundation CoreBluetooth</Frameworks>
            <NeedsGccExceptionHandling>false</NeedsGccExceptionHandling>
            <IsCxx>false</IsCxx>
        </NativeReference>
        <!-- Copy the xcframework to the output directory for the app to find Info.plist and
        binaries -->
        <None
            Include="$(MSBuildThisFileDirectory)../buildTransitive/xcframeworks/flic2lib.xcframework/**">
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
            <Pack>false</Pack>
        </None>
    </ItemGroup>

    <!-- Framework flags are set in .props file to avoid duplication -->
    <!-- Only -ObjC flag is added here for Objective-C category support -->
    <PropertyGroup Condition="$(TargetFramework.Contains('-ios'))">
        <MtouchExtraArgs>$(MtouchExtraArgs) -ObjC</MtouchExtraArgs>
    </PropertyGroup>
</Project>